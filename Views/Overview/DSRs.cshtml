@model IEnumerable<PipelineFeatureList.Models.Overview>
@{ 
    ViewBag.Title = "Pipeline Segmented Feature List”";
}

<table>
    @foreach (var itemSection in Model)
    {
        <tr><td><h3>Pipeline Segmented Feature List&nbsp;&nbsp;&nbsp;&nbsp;@Html.DisplayFor(modelitem => itemSection.PipeSystemData.PipeSystemItem) Pipeline: @Html.DisplayFor(modelitem => itemSection.PipelineData.PipelineItem) Orion Stations Series: @Html.DisplayFor(modelitem => itemSection.ValveSectionData.OrionStationSeries)</h3></td></tr>
        break;
    }
</table>
@* ------------------------------ Valve Section Feature List ------------------------------ *@
@{
    string feature = "", featureid = "", pipetype = "", pipetypeid = "";
    string od1 = "", od1id = "", od2 = "", od2id = "";
    string odrecord1 = "", odrecord1id = "";
    string odrecord2 = "", odrecord2id = "";
    string wt1 = "", wt2 = "";
    string wtrecord1 = "", wtrecord1id = "";
    string wtrecord2 = "", wtrecord2id = "";
    string st = "", stid = "";
    string strecord1 = "", strecord1id = "";
    string strecord2 = "", strecord2id = "";
    string sr = "", srid = "", grade = "", gradeid = "";
    string srrecord1 = "", srrecord1id = "";
    string srrecord2 = "", srrecord2id = "";
    string ansi = "", ansiid = "";
    string material = "", materialid = "";
    string angle = "";
    string radius = "", radiusid = "";
    string orient = "", orientid = "";
    string mill = "";
}

<div style="width:1800px; height:800px; overflow:scroll">

        <table class="overviewfeaturetable">
            <tr><th colspan="19">FEATURE INFORMATION</th><th colspan="21">MAOP SPECIFICATIONS</th><th>MATERIAL</th>
            <th colspan="3">BEND DATA</th><th colspan="2">COATING</th><th colspan="4">PURCHASE/INSTALL</th>
            <th colspan="7">DESIGN PRESSURE CALCULATIONS</th><th></th></tr>
            <tr><th>GIS Alignment Sheet<br />Begin Station</th><th>GIS Alignment Sheet<br />End Station</th><th>Feature Number</th><th>Feature</th>
                <th>Type</th><th>Length<br />(feet)</th>                   
                <th>Crossing Type</th><th>Issues/Errors</th><th>GIS Stationing</th><th>Orion Stationing</th><th>Crossing Name & Notes</th>
                <th>Current Class<br />Location</th><th>Class<br />Design<br />Factor</th><th>HCA Name</th>
                <th>Job Number/Work Order<br />/Purchase Order #</th><th>Install Date<br />mm/dd/yyyy</th><th>In-Service Date<br />mm/dd/yyyy</th>
                <th>Construction Type</th><th>Notes / Comments</th><th>Drawing<br />Identifier</th><th>O.D. 1<br />(inch)</th><th>OD<br />Records<br />Identifier 1</th>
                <th>OD<br />Records<br />Identifier 2</th><th>OD Record<br />Matrix Check</th><th>W.T. 1<br />(inch)</th><th>WT<br />Records<br />Identifier 1</th>
                <th>WT<br />Records<br />Identifier 2</th><th>WT Record<br />Matrix Check</th><th>O.D. 2<br />(inch)</th><th>W.T. 2<br />(inch)</th>
                <th>Seam Weld Type</th><th>Seam<br />Records<br />Identifier 1</th><th>Seam<br />Records<br />Identifier 2</th>
                <th>Seam Record<br />Matrix Check</th><th>Specification<br />/Rating</th><th>Grade</th><th>Spec/Grade<br />Records<br />Identifier 1</th>
                <th>Spec/Grade<br />Records<br />Identifier 2</th><th>Spec/Grade Record<br />Matrix Check</th><th>ANSI Rating</th><th>Material Type</th>
                <th>Angle</th><th>Radius</th><th>Orient</th><th>Coating Type</th><th>Description</th><th>Manufacturer</th><th>Manufacturer Type</th><th>Mill</th><th>MFR Date<br />mm/dd/yyyy</th>
                <th>SMYS [S]<br />(psi)</th><th>Outside Diameter [D]<br />(inch)</th><th>Wall Thickness [t]<br />(inch)</th>
                <th>Design Factor [F]</th><th> Joint Factor [E]</th><th>Temperature<br />Derating [T]</th><th>Design Pressure [P]<br />(psig)</th>
            </tr>
        @foreach (var item in ViewBag.DSRSection)
        {
            if (item != null)
            {
                if (item.Feature == null)
                {
                    feature = ""; featureid = "";
                }
                else
                {
                    feature = item.Feature;
                    featureid = item.Feature.ToString();
                }
                if (item.FeatureType == null)
                {
                    pipetype = ""; pipetypeid = "";
                }
                else
                {
                    pipetype = item.FeatureType;
                    pipetypeid = item.FeatureType.ToString();
                }
                if (item.Feature_OuterDiameter1 == null)
                {
                    od1 = ""; od1id = "";
                }
                else
                {
                    od1 = item.Feature_OuterDiameter1.ToString();
                    od1id = item.Feature_OuterDiameter1.ToString();
                }
                if (item.Feature_OuterDiameter2 == null)
                {
                    od2 = ""; od2id = "";
                }
                else
                {
                    od2 = item.Feature_OuterDiameter2.ToString();
                    od2id = item.Feature_OuterDiameter2.ToString();
                }
                if (item.Feature_OuterDiameterRecord1_Identfier == null)
                {
                    odrecord1 = ""; odrecord1id = "";
                }
                else
                {
                    odrecord1 = item.Feature_OuterDiameterRecord1_Description;
                    odrecord1id = item.Feature_OuterDiameterRecord1_Identfier.ToString();
                }
                if (item.Feature_OuterDiameterRecord2_Identfier == null)
                {
                    odrecord2 = ""; odrecord2id = "";
                }
                else
                {
                    odrecord2 = item.Feature_OuterDiameterRecord2_Description;
                    odrecord2id = item.Feature_OuterDiameterRecord2_Identfier.ToString();
                }
                if (item.Feature_WallThickness1 == null)
                {
                    wt1 = "";
                }
                else
                {
                    wt1 = item.Feature_WallThickness1.ToString();
                }
                if (item.Feature_WallThickness2 == null)
                {
                    wt2 = "";
                }
                else
                {
                    wt2 = item.Feature_WallThickness2.ToString();
                }
                if (item.Feature_WallThicknessRecord1_Identifier == null)
                {
                    wtrecord1 = ""; wtrecord1id = "";
                }
                else
                {
                    wtrecord1 = item.Feature_WallThicknessRecord1_Description;
                    wtrecord1id = item.Feature_WallThicknessRecord1_Identifier.ToString();
                }
                if (item.Feature_WallThicknessRecord2_Identifier == null)
                {
                    wtrecord2 = ""; wtrecord2id = "";
                }
                else
                {
                    wtrecord2 = item.Feature_WallThicknessRecord2_Description;
                    wtrecord2id = item.Feature_WallThicknessRecord2_Identifier.ToString();
                }
                if (item.Feature_SeamType == null)
                {
                    st = ""; stid = "";
                }
                else
                {
                    st = item.Feature_SeamType;
                    stid = item.Feature_SeamType.ToString();
                }
                if (item.Feature_SeamRecord1_Identifier == null)
                {
                    strecord1 = ""; strecord1id = "";
                }
                else
                {
                    strecord1 = item.Feature_SeamRecord1_Description;
                    strecord1id = item.Feature_SeamRecord1_Identifier.ToString();
                }
                if (item.Feature_SeamRecord2_Identifier == null)
                {
                    strecord2 = ""; strecord2id = "";
                }
                else
                {
                    strecord2 = item.Feature_SeamRecord2_Description;
                    strecord2id = item.Feature_SeamRecord2_Identifier.ToString();
                }
                if (item.Feature_SpecRating == null)
                {
                    sr = ""; srid = "";
                }
                else
                {
                    sr = item.Feature_SpecRating;
                    srid = item.Feature_SpecRating.ToString();
                }
                if (item.SpecRatingRecord1_Identifier == null)
                {
                    srrecord1 = ""; srrecord1id = "";
                }
                else
                {
                    srrecord1 = item.SpecRatingRecord1_Description;
                    srrecord1id = item.SpecRatingRecord1_Identifier.ToString();
                }
                if (item.SpecRatingRecord2_Identifier == null)
                {
                    srrecord2 = ""; srrecord2id = "";
                }
                else
                {
                    srrecord2 = item.SpecRatingRecord2_Description;
                    srrecord2id = item.SpecRatingRecord2_Identifier.ToString();
                }
                if (item.Feature_ANSIRating == null)
                {
                    ansi = ""; ansiid = "";
                }
                else
                {
                    ansi = item.Feature_ANSIRating;
                    ansiid = item.Feature_ANSIRating.ToString();
                }
                if (item.Feature_MaterialType == null)
                {
                    material = ""; materialid = "";
                }
                else
                {
                    material = item.Feature_MaterialType;
                    materialid = item.Feature_MaterialType.ToString();
                }
                if (item.Angle == null)
                {
                    angle = "";
                }
                else
                {
                    angle = item.Angle.ToString();
                }
                if (item.Feature_BendRadius == null)
                {
                    radius = ""; radiusid = "";
                }
                else
                {
                    radius = item.Feature_BendRadius;
                    radiusid = item.Feature_BendRadius.ToString();
                }
                if (item.Feature_Orientation == null)
                {
                    orient = ""; orientid = "";
                }
                else
                {
                    orient = item.Feature_Orientation;
                    orientid = item.Feature_Orientation.ToString();
                }
                if (item.Feature_Mill == null)
                {
                    mill = "";
                }
                else
                {
                    mill = item.Feature_Mill.ToString();
                }
                if (item.Feature_Grade == null)
                {
                    gradeid = "";
                }
                else
                {
                    gradeid = item.Feature_Grade.ToString();
                }
            }
            if (item != null)
            {
            <tr>
                <td>
                    @Html.Raw(string.Format("{0:0+00}", item.Segment_Begin_Ft))
                </td>
                <td>
                    @Html.Raw(string.Format("{0:0+00}", item.Segment_End_Ft))
                </td>
                <td>
                    @Html.Raw(item.FeatureNumber + "." + string.Format("{0:00}", item.SegmentNumber))
                </td>
                <td>
                    @Html.Raw(item.Feature)
                </td>
                <td>
                    @Html.Raw(item.FeatureType)
                </td>
                <td>
                    @Html.Raw(string.Format("{0:0.00}", item.Segment_Length))
                </td>
                
                <td>
                    @if (item.Crossing_Type != null)
                    {
                        @Html.Raw(item.Crossing_Type)
                    }
                    else
                    {
                        @Html.Raw("N/A")    
                    }
                </td>
                <td>
                    @if (item.Crossing_IssuesAndErrors != null)
                    {
                        @Html.Raw(item.Crossing_IssuesAndErrors)
                    }
                    else
                    {
                        @Html.Raw("N/A")    
                    }
                </td>
                <td>
                    @if (item.Crossing_Center_Ft != null)
                    {
                        @Html.Raw(string.Format("{0:0+00}", item.Crossing_Center_Ft))
                    }
                    else
                    {
                        @Html.Raw("N/A")    
                    }
                </td>
                <td>
                    @if (item.Crossing_Orion_Center_Ft != null)
                    {
                        @Html.Raw(string.Format("{0:0+00}", item.Crossing_Orion_Center_Ft))
                    }
                    else
                    {
                        @Html.Raw("N/A")    
                    }
                </td>
                <td>
                    @if (item.Crossing_NamesAndNotes != null)
                    {
                        @Html.Raw(item.Crossing_NamesAndNotes)
                    }
                    else
                    {
                        @Html.Raw("N/A")    
                    }
                </td>
                <td>
                    @if (item.Current_Class_Location != null)
                    {
                        @Html.Raw(item.Current_Class_Location)
                    }
                    else
                    {
                        @Html.Raw("N/A")
                    }
                </td>
                <td>
                    @Html.Raw(item.Segment_DesignFactor)
                </td>
                <td>
                    @if (item.Segment_HCA != null)
                    {
                        @Html.Raw(item.Segment_HCA)
                    }
                    else
                    {
                        @Html.Raw("N/A")
                    }
                </td>
                <td>
                    @try
                    {
                        if (item.Feature_JobWorkOrderPurchaseOrder_Unknown)
                        {
                            @Html.Raw("Unknown")
                        }
                    }
                    catch { }
                    @try
                    {
                        if (!item.Feature_JobWorkOrderPurchaseOrder_Unknown)
                        {
                            @Html.Raw(string.Format("{0:d}", item.Feature_JobWorkOrderPurchaseOrder));
                        }
                    }
                    catch { }
                </td>
                <td>
                    @try
                    {
                        if (item.Feature_InstallDate_Unknown)
                        {
                            @Html.Raw("Unknown")
                        }
                    }
                    catch { }
                    @try
                    {
                        if (!item.Feature_InstallDate_Unknown)
                        {
                            @Html.Raw(string.Format("{0:d}", item.Feature_InstallDate));
                        }
                    }
                    catch { }
                </td>
                <td>
                    @try
                    {
                        if (item.Feature_InServiceDate_Unknown)
                        {
                            @Html.Raw("Unknown")
                        }
                    }
                    catch { }
                    @try
                    {
                        if (!item.Feature_InServiceDate_Unknown)
                        {
                            @Html.Raw(string.Format("{0:d}", item.Feature_InServiceDate));
                        }
                    }
                    catch { }
                </td>
                <td>
                    @Html.Raw(item.Feature_ConstructionType)
                </td>
                <td>
                    @Html.Raw(item.Feature_Notes)
                </td>
                <td>
                    @Html.Raw(item.Feature_Drawing_Description)
                </td>
                <td>
                    @if (feature == "Skip" && pipetype != "No Records" && pipetypeid != "0" && od1id == "")
                    {
                        @Html.Raw("N/A")
                    }
                    else
                    {
                        @Html.Raw(item.Feature_OuterDiameter1)
                    }
                </td>
                <td>
                    @if (odrecord1id != "")
                    {
                        @Html.Raw(item.Feature_OuterDiameterRecord1_Description)
                    }
                    else
                    {
                        @Html.Raw("")
                    }
                </td>
                <td>
                    @if (odrecord2id != "")
                    {
                        @Html.Raw(item.Feature_OuterDiameterRecord2_Description)
                    }
                    else
                    {
                        @Html.Raw("")
                    }
                </td>
                @if (item != null)
                {
                    if (item.Feature_ODRecordMatrixCheck == 0 || item.Feature_ODRecordMatrixCheck == null)
                    {
                    <td style='background-color:Red'>No</td>
                    }
                    else
                    {
                    <td style='background-color:Green'>Yes</td>
                    }
                }
                else
                {
                    <td></td>
                }
                <td>
                    @if (feature == "Skip" && pipetype != "No Records" && pipetypeid != "0" && wt1 == "")
                    {
                        @Html.Raw("N/A")
                    }
                    else
                    {
                        if (item.Feature_WallThickness1 != null)
                        {
                            @Html.Raw(string.Format("{0:0.0000}", item.Feature_WallThickness1))
                        }
                        else
                        {
                            @Html.Raw("");
                        }
                    }
                </td>
                <td>
                    @if (wtrecord1id != "")
                    {
                        @Html.Raw(item.Feature_WallThicknessRecord1_Description)
                    }
                    else
                    {
                        @Html.Raw("")
                    }
                </td>
                <td>
                    @if (wtrecord2id != "")
                    {
                        @Html.Raw(item.Feature_WallThicknessRecord2_Description)
                    }
                    else
                    {
                        @Html.Raw("")
                    }
                </td>
                @if (item != null)
                {
                    if (item.Feature_WTRecordMatrixCheck == 0 || item.Feature_WTRecordMatrixCheck == null)
                    {
                    <td style='background-color:Red'>No</td>
                    }
                    else
                    {
                    <td style='background-color:Green'>Yes</td>
                    }
                }
                else
                {
                    <td></td>
                }
                <td>
                    @if (feature == "Pipe" && pipetype == "Casing" && od2id == "")
                    {
                        @Html.Raw("Unknown")
                    }
                    else if (od2id == "")
                    {
                        @Html.Raw("N/A")
                    }
                    else
                    {
                        @Html.Raw(item.Feature_OuterDiameter2)
                    }
                </td>
                <td>
                    @if (feature == "Pipe" && pipetype == "Casing" && wt2 == "")
                    {
                        @Html.Raw("Unknown")
                    }
                    else if (wt2 == "")
                    {
                        @Html.Raw("N/A")
                    }
                    else
                    {
                        if (item.Feature_WallThickness2 != null)
                        {
                            @Html.Raw(string.Format("{0:0.0000}", item.Feature_WallThickness2))
                        }
                        else
                        {
                            @Html.Raw("");
                        }
                    }
                </td>
                <td>
                    @if (feature == "Skip" && pipetype != "No Records" && pipetypeid != "0" && stid == "")
                    {
                        @Html.Raw("N/A")
                    }
                    else
                    {
                        @Html.Raw(item.Feature_SeamType)
                    }
                </td>
                <td>
                    @if (strecord1id != "")
                    {
                        @Html.Raw(item.Feature_SeamRecord1_Description)
                    }
                    else
                    {
                        @Html.Raw("")
                    }
                </td>
                <td>
                    @if (strecord2id != "")
                    {
                        @Html.Raw(item.Feature_SeamRecord2_Description)
                    }
                    else
                    {
                        @Html.Raw("")
                    }
                </td>
                @if (item != null)
                {
                    if (item.Feature_SeamRecordMatrixCheck == 0 || item.Feature_SeamRecordMatrixCheck == null)
                    {
                    <td style='background-color:Red'>No</td>
                    }
                    else
                    {
                    <td style='background-color:Green'>Yes</td>
                    }
                }
                else
                {
                    <td></td>
                }
                <td>
                    @if (feature == "Skip" && pipetype != "No Records" && pipetypeid != "0" && srid == "")
                    {
                        @Html.Raw("N/A")
                    }
                    else
                    {
                        @Html.Raw(item.Feature_SpecRating)
                    }
                </td>
                <td>
                    @if (feature == "Skip" && pipetype != "No Records" && pipetypeid != "0" && gradeid == "")
                    {
                        @Html.Raw("N/A")
                    }
                    else
                    {
                        @Html.Raw(item.Feature_Grade)
                    }
                </td>
                <td>
                    @if (srrecord1id != "")
                    {
                        @Html.Raw(item.SpecRatingRecord1_Description)
                    }
                    else
                    {
                        @Html.Raw("")
                    }
                </td>
                <td>
                    @if (srrecord2id != "")
                    {
                        @Html.Raw(item.SpecRatingRecord2_Description)
                    }
                    else
                    {
                        @Html.Raw("")
                    }
                </td>
                @if (item != null)
                {
                    if (item.Feature_SpecRatingRecordMatrixCheck == 0 || item.Feature_SpecRatingRecordMatrixCheck == null)
                    {
                    <td style='background-color:Red'>No</td>
                    }
                    else
                    {
                    <td style='background-color:Green'>Yes</td>
                    }
                }
                else
                {
                    <td></td>
                }
                <td>
                    @if (ansiid != "")
                    {
                        @Html.Raw(item.Feature_ANSIRating)
                    }
                    else
                    {
                        @Html.Raw("N/A")
                    }
                </td>
                <td>
                    @Html.Raw(item.Feature_MaterialType)
                </td>
                <td>
                    @if (angle != "")
                    {
                        @Html.Raw(item.Angle)
                    }
                    else
                    {
                        @Html.Raw("N/A")
                    }
                </td>
                <td>
                    @if (radiusid != "")
                    {
                        @Html.Raw(item.Feature_BendRadius)
                    }
                    else
                    {
                        @Html.Raw("N/A")
                    }
                </td>
                <td>
                    @if (orientid != "")
                    {
                        @Html.Raw(item.Feature_Orientation)
                    }
                    else
                    {
                        @Html.Raw("N/A")
                    }
                </td>
                <td>
                    @Html.Raw(item.Feature_CoatingType)
                </td>
                <td>
                    @try
                    {
                        if (item.Feature_CoatingDescription_Unknown)
                        {
                            @Html.Raw("Unknown")
                        }
                    }
                    catch { }
                    @try
                    {
                        if (!item.Feature_CoatingDescription_Unknown)
                        {
                            @Html.Raw(item.Feature_CoatingDescription);
                        }
                    }
                    catch { }
                </td>
                <td>
                    @Html.Raw(item.Feature_Manufacturer)
                </td>
                <td>
                    @Html.Raw(item.Feature_ManufacturerType)
                </td>
                <td>
                    @try
                    {
                        if (item.Feature_Mill_Unknown)
                        {
                            @Html.Raw("Unknown")
                        }
                    }
                    catch { }
                    @try
                    {
                        if (!item.Feature_Mill_Unknown)
                        {
                            @Html.Raw(item.Feature_Mill);
                        }
                    }
                    catch { }
                </td>
                <td>
                    @try
                    {
                        if (item.Feature_ManufacturerDate_Unknown)
                        {
                            @Html.Raw("Unknown")
                        }
                    }
                    catch { }
                    @try
                    {
                        if (!item.Feature_ManufacturerDate_Unknown)
                        {
                            @Html.Raw(string.Format("{0:d}", item.Feature_ManufacturerDate));
                        }
                    }
                    catch { }
                </td>
                <td>
                    @if (feature != "Skip")
                    {
                        @Html.Raw(item.Segment_SMYS)
                    }
                    else
                    {
                        @Html.Raw("Skip")
                    }
                </td>
                <td>
                    @if (feature != "Skip")
                    {
                        @Html.Raw(item.Feature_OuterDiameter1)
                    }
                    else
                    {
                        @Html.Raw("Skip")
                    }
                </td>
                <td>
                    @if (feature != "Skip")
                    {
                        if (item.Feature_WallThickness1 != null)
                        {
                            @Html.Raw(string.Format("{0:0.0000}", item.Feature_WallThickness1))
                        }
                        else
                        {
                            @Html.Raw("");
                        }
                    }
                    else
                    {
                        @Html.Raw("Skip")
                    }
                </td>
                <td>
                    @if (feature != "Skip")
                    {
                        @Html.Raw(item.Segment_DesignFactor)
                    }
                    else
                    {
                        @Html.Raw("Skip")
                    }
                </td>
                <td>
                    @if (feature != "Skip")
                    {
                        @Html.Raw(item.Segment_JointFactor)
                    }
                    else
                    {
                        @Html.Raw("Skip")
                    }
                </td>
                <td>
                    @if (feature != "Skip")
                    {
                        @Html.Raw(item.Segment_TemperatureDerating)
                    }
                    else
                    {
                        @Html.Raw("Skip")
                    }
                </td>
                @if (ViewBag.MAOP > item.Segment_DesignPressure && feature != "Skip" && item.Segment_DesignPressure != null)
                {
                    <td style='background-color:Red'>
                    @if (feature != "Skip")
                    {
                        if (item.Segment_DesignPressure != null)
                        {
                            @Html.Raw(string.Format("{0:0}", item.Segment_DesignPressure))
                        }
                        else
                        {
                            @Html.Raw("")
                        }
                    }
                    else
                    {
                        @Html.Raw("Skip")
                    }
                    </td>
                }
                else
                {
                    <td>
                    @if (feature != "Skip")
                    {
                        if (item.Segment_DesignPressure != null)
                        {
                            @Html.Raw(string.Format("{0:0}", item.Segment_DesignPressure))
                        }
                        else
                        {
                            @Html.Raw("")
                        }
                    }
                    else
                    {
                        @Html.Raw("Skip")
                    }
                    </td>
                }
            </tr>
            }
        }
        </table>
</div>
